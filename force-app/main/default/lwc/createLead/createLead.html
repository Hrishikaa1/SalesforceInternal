<template>
    <lightning-card title={pageTitle} icon-name={cardIconName}>
        <div class="slds-p-around_medium">
            
            <!-- Success Message -->
            <template if:true={showSuccess}>
                <div class="slds-m-bottom_medium">
                    <div class="slds-notify slds-notify_alert slds-alert_success" role="alert">
                        <span class="slds-assistive-text">Success</span>
                        <span class="slds-icon_container slds-icon-utility-success slds-m-right_x-small">
                            <lightning-icon icon-name="utility:success" alternative-text="Success" size="x-small" variant="inverse"></lightning-icon>
                        </span>
                        <template if:true={isUpdateMode}>
                            <h2>Lead updated successfully!</h2>
                        </template>
                        <template if:false={isUpdateMode}>
                            <h2>Lead created successfully! Lead ID: {createdLeadId}</h2>
                        </template>
                    </div>
                </div>
            </template>

            <!-- Error Message -->
            <template if:true={errorMessage}>
                <div class="slds-m-bottom_medium">
                    <div class="slds-notify slds-notify_alert slds-alert_error" role="alert">
                        <span class="slds-assistive-text">Error</span>
                        <span class="slds-icon_container slds-icon-utility-error slds-m-right_x-small">
                            <lightning-icon icon-name="utility:error" alternative-text="Error" size="x-small" variant="inverse"></lightning-icon>
                        </span>
                        <h2>{errorMessage}</h2>
                    </div>
                </div>
            </template>

            <!-- Lead Creation/Update Form -->
            <form onsubmit={handleSubmit}>
                <div class="slds-grid slds-wrap slds-gutters">
                    
                    <!-- First Name -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            label="First Name"
                            name="firstName"
                            value={firstName}
                            onchange={handleInputChange}>
                        </lightning-input>
                    </div>

                    <!-- Last Name -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            label="Last Name"
                            name="lastName"
                            value={lastName}
                            onchange={handleInputChange}
                            required>
                        </lightning-input>
                    </div>

                    <!-- Email -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            type="email"
                            label="Email"
                            name="email"
                            value={email}
                            onchange={handleInputChange}>
                        </lightning-input>
                    </div>

                    <!-- Phone -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            type="tel"
                            label="Phone"
                            name="phone"
                            value={phone}
                            onchange={handleInputChange}>
                        </lightning-input>
                    </div>

                    <!-- Company -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            label="Company"
                            name="company"
                            value={company}
                            onchange={handleInputChange}
                            required>
                        </lightning-input>
                    </div>

                    <!-- Title -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            label="Title"
                            name="title"
                            value={title}
                            onchange={handleInputChange}>
                        </lightning-input>
                    </div>

                    <!-- Lead Source -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-combobox
                            label="Lead Source"
                            name="leadSource"
                            value={leadSource}
                            placeholder="Select Lead Source"
                            options={leadSourceOptions}
                            onchange={handleInputChange}>
                        </lightning-combobox>
                    </div>

                    <!-- Status -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-combobox
                            label="Status"
                            name="status"
                            value={status}
                            placeholder="Select Status"
                            options={statusOptions}
                            onchange={handleInputChange}>
                        </lightning-combobox>
                    </div>

                    <!-- Industry -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-combobox
                            label="Industry"
                            name="industry"
                            value={industry}
                            placeholder="Select Industry"
                            options={industryOptions}
                            onchange={handleInputChange}>
                        </lightning-combobox>
                    </div>

                    <!-- Rating -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-combobox
                            label="Rating"
                            name="rating"
                            value={rating}
                            placeholder="Select Rating"
                            options={ratingOptions}
                            onchange={handleInputChange}>
                        </lightning-combobox>
                    </div>

                    <!-- Street -->
                    <div class="slds-col slds-size_1-of-1">
                        <lightning-input
                            label="Street"
                            name="street"
                            value={street}
                            onchange={handleInputChange}>
                        </lightning-input>
                    </div>

                    <!-- City -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            label="City"
                            name="city"
                            value={city}
                            onchange={handleInputChange}>
                        </lightning-input>
                    </div>

                    <!-- State -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            label="State/Province"
                            name="state"
                            value={state}
                            onchange={handleInputChange}>
                        </lightning-input>
                    </div>

                    <!-- Postal Code -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            label="Postal Code"
                            name="postalCode"
                            value={postalCode}
                            onchange={handleInputChange}>
                        </lightning-input>
                    </div>

                    <!-- Country -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            label="Country"
                            name="country"
                            value={country}
                            onchange={handleInputChange}>
                        </lightning-input>
                    </div>

                    <!-- Website -->
                    <div class="slds-col slds-size_1-of-1">
                        <lightning-input
                            type="url"
                            label="Website"
                            name="website"
                            value={website}
                            onchange={handleInputChange}>
                        </lightning-input>
                    </div>

                    <!-- Description -->
                    <div class="slds-col slds-size_1-of-1">
                        <lightning-textarea
                            label="Description"
                            name="description"
                            value={description}
                            onchange={handleInputChange}>
                        </lightning-textarea>
                    </div>

                </div>

                <!-- Action Buttons -->
                <div class="slds-m-top_medium">
                    <lightning-button
                        variant="neutral"
                        label="Cancel"
                        onclick={handleCancel}
                        class="slds-m-right_small">
                    </lightning-button>
                    <lightning-button
                        variant="brand"
                        type="submit"
                        label={buttonLabel}
                        data-id="submit-button">
                    </lightning-button>
                </div>

            </form>

            <!-- Loading Spinner -->
            <template if:true={isLoading}>
                <lightning-spinner
                    alternative-text="Processing..."
                    size="medium">
                </lightning-spinner>
            </template>

        </div>
    </lightning-card>
</template>