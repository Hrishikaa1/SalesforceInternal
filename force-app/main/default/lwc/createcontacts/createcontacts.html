<template>
    <lightning-modal-header label={modalTitle}></lightning-modal-header>
    <lightning-modal-body>
        <template if:true={isLoading}>
            <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
        </template>
        <div class="slds-grid slds-wrap slds-gutters slds-p-around_medium">
            
            <!-- Account Lookup -->
            <div class="slds-col slds-size_1-of-1">
                <lightning-combobox
                    label="Account"
                    placeholder="Search Account..."
                    data-field="AccountId"
                    value={contactRecord.AccountId}
                    options={accountOptions}
                    onchange={handleChange}
                    disabled={isViewMode}
                    required>
                </lightning-combobox>
            </div>

            <div class="slds-col slds-size_1-of-2">
                <lightning-input
                    label="Last Name"
                    data-field="LastName"
                    value={contactRecord.LastName}
                    onchange={handleChange}
                    required
                    disabled={isViewMode}>
                </lightning-input>
            </div>
            <div class="slds-col slds-size_1-of-2">
                <lightning-input
                    type="email"
                    label="Email"
                    data-field="Email"
                    value={contactRecord.Email}
                    onchange={handleChange}
                    disabled={isViewMode}>
                </lightning-input>
            </div>
            <div class="slds-col slds-size_1-of-2">
                <lightning-input
                    type="tel"
                    label="Phone"
                    data-field="Phone"
                    value={contactRecord.Phone}
                    onchange={handleChange}
                    disabled={isViewMode}>
                </lightning-input>
            </div>
            <div class="slds-col slds-size_1-of-2">
                <lightning-input
                    type="tel"
                    label="Mobile Phone"
                    data-field="MobilePhone"
                    value={contactRecord.MobilePhone}
                    onchange={handleChange}
                    disabled={isViewMode}>
                </lightning-input>
            </div>
            <div class="slds-col slds-size_1-of-2">
                <lightning-combobox
                    label="Contact Type"
                    data-field="Contact_type__c"
                    value={contactRecord.Contact_type__c}
                    options={contactTypeOptions}
                    onchange={handleChange}
                    disabled={isViewMode}
                    required>
                </lightning-combobox>
            </div>
            <div class="slds-col slds-size_1-of-2">
                <lightning-combobox
                    label="Submitted By"
                    data-field="Submitted_by__c"
                    value={contactRecord.Submitted_by__c}
                    options={submittedByOptions}
                    onchange={handleChange}
                    disabled={isViewMode}
                    required>
                </lightning-combobox>
            </div>
        </div>
    </lightning-modal-body>
    
    <template if:false={isViewMode}>
        <lightning-modal-footer>
            <lightning-button
                variant="neutral"
                label="Cancel"
                onclick={handleCancel}
                disabled={isLoading}>
            </lightning-button>
            <lightning-button
                variant="brand"
                label="Save"
                onclick={handleSave}
                disabled={isLoading}>
            </lightning-button>
        </lightning-modal-footer>
    </template>

    <template if:true={isViewMode}>
        <lightning-modal-footer>
            <lightning-button
                variant="brand"
                label="Close"
                onclick={handleCancel}>
            </lightning-button>
        </lightning-modal-footer>
    </template>
</template>